/**vim:et:ts=4:sw=4:sts=4*@licenseRequireJS2.1.11Copyright(c)2010-2014,TheDojoFoundationAllRightsReserved.*AvailableviatheMITornewBSDlicense.*see:http://github.com/jrburke/requirejsfordetails*///Notusingstrict:unevenstrictsupportinbrowsers,#392,andcauses//problemswithrequirejs.exec()/transpilerpluginsthatmaynotbestrict./*jslintregexp:true,nomen:true,sloppy:true*//*globalwindow,navigator,document,importScripts,setTimeout,opera*/varrequirejs,require,define;(function(global){varreq,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version='2.1.11',commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!!(typeofwindow!=='undefined'&&typeofnavigator!=='undefined'&&window.document),isWebWorker=!isBrowser&&typeofimportScripts!=='undefined',//PS3indicatesloadedandcomplete,butneedtowaitforcomplete//specifically.Sequenceis'loading','loaded',execution,//then'complete'.TheUAcheckisunfortunate,butnotsurehow//tofeaturetestw/ocausingperfissues.readyRegExp=isBrowser&&navigator.platform==='PLAYSTATION3'?/^complete$/:/^(complete|loaded)$/,defContextName='_',//Ohthetragedy,detectingopera.SeetheusageofisOperaforreason.isOpera=typeofopera!=='undefined'&&opera.toString()==='[objectOpera]',contexts={},cfg={},globalDefQueue=[],useInteractive=false;functionisFunction(it){returnostring.call(it)==='[objectFunction]';}functionisArray(it){returnostring.call(it)==='[objectArray]';}/***Helperfunctionforiteratingoveranarray.Ifthefuncreturns*atruevalue,itwillbreakoutoftheloop.*/functioneach(ary,func){if(ary){vari;for(i=0;i<ary.length;i+=1){if(ary[i]&&func(ary[i],i,ary)){break;}}}}/***Helperfunctionforiteratingoveranarraybackwards.Ifthefunc*returnsatruevalue,itwillbreakoutoftheloop.*/functioneachReverse(ary,func){if(ary){vari;for(i=ary.length-1;i>-1;i-=1){if(ary[i]&&func(ary[i],i,ary)){break;}}}}functionhasProp(obj,prop){returnhasOwn.call(obj,prop);}functiongetOwn(obj,prop){returnhasProp(obj,prop)&&obj[prop];}/***Cyclesoverpropertiesinanobjectandcallsafunctionforeach*propertyvalue.Ifthefunctionreturnsatruthyvalue,thenthe*iterationisstopped.*/functioneachProp(obj,func){varprop;for(propinobj){if(hasProp(obj,prop)){if(func(obj[prop],prop)){break;}}}}/***Simplefunctiontomixinpropertiesfromsourceintotarget,*butonlyiftargetdoesnotalreadyhaveapropertyofthesamename.*/functionmixin(target,source,force,deepStringMixin){if(source){eachProp(source,function(value,prop){if(force||!hasProp(target,prop)){if(deepStringMixin&&typeofvalue==='object'&&value&&!isArray(value)&&!isFunction(value)&&!(valueinstanceofRegExp)){if(!target[prop]){target[prop]={};}mixin(target[prop],value,force,deepStringMixin);}else{target[prop]=value;}}});}returntarget;}//SimilartoFunction.prototype.bind,butthe'this'objectisspecified//first,sinceitiseasiertoread/figureoutwhat'this'willbe.functionbind(obj,fn){returnfunction(){returnfn.apply(obj,arguments);};}functionscripts(){returndocument.getElementsByTagName('script');}functiondefaultOnError(err){throwerr;}//Allowgettingaglobalthatisexpressedin//dotnotation,like'a.b.c'.functiongetGlobal(value){if(!value){returnvalue;}varg=global;each(value.split('.'),function(part){g=g[part];});returng;}/***ConstructsanerrorwithapointertoanURLwithmoreinformation.*@param{String}idtheerrorIDthatmapstoanIDonawebpage.*@param{String}messagehumanreadableerror.*@param{Error}[err]theoriginalerror,ifthereisone.**@returns{Error}*/functionmakeError(id,msg,err,requireModules){vare=newError(msg+'\nhttp://requirejs.org/docs/errors.html#'+id);e.requireType=id;e.requireModules=requireModules;if(err){e.originalError=err;}returne;}if(typeofdefine!=='undefined'){//IfadefineisalreadyinplayviaanotherAMDloader,//donotoverwrite.return;}if(typeofrequirejs!=='undefined'){if(isFunction(requirejs)){//Donotoverwriteandexistingrequirejsinstance.return;}cfg=requirejs;requirejs=undefined;}//Allowforarequireconfigobjectif(typeofrequire!=='undefined'&&!isFunction(require)){//assumeitisaconfigobject.cfg=require;require=undefined;}functionnewContext(contextName){varinCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={//Defaults.Donotsetadefaultformap//configtospeedupnormalize(),which//willrunfasterifthereisnodefault.waitSeconds:7,baseUrl:'./',paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},//registryofjustenabledmodules,tospeed//cyclebreakingcodewhenlotsofmodules//areregistered,butnotactivated.enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;/***Trimsthe.and..fromanarrayofpathsegments.*Itwillkeepaleadingpathsegmentifa..willbecome*thefirstpathsegment,tohelpwithmodulenamelookups,*whichactlikepaths,butcanberemapped.Buttheendresult,*allpathsthatusethisfunctionshouldlooknormalized.*NOTE:thismethodMODIFIEStheinputarray.*@param{Array}arythearrayofpathsegments.*/functiontrimDots(ary){vari,part,length=ary.length;for(i=0;i<length;i++){part=ary[i];if(part==='.'){ary.splice(i,1);i-=1;}elseif(part==='..'){if(i===1&&(ary[2]==='..'||ary[0]==='..')){//Endoftheline.Keepatleastonenon-dot//pathsegmentatthefrontsoitcanbemapped//correctlytodisk.Otherwise,thereislikely//nopathmappingforapathstartingwith'..'.//Thiscanstillfail,butcatchesthemostreasonable//usesof..break;}elseif(i>0){ary.splice(i-1,2);i-=2;}}}}/***Givenarelativemodulename,like./something,normalizeitto*arealnamethatcanbemappedtoapath.*@param{String}nametherelativename*@param{String}baseNamearealnamethatthenameargisrelative*to.*@param{Boolean}applyMapapplythemapconfigtothevalue.Should*onlybedoneifthisnormalizationisforadependencyID.*@returns{String}normalizedname*/functionnormalize(name,baseName,applyMap){varpkgMain,mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split('/'),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map['*'];//Adjustanyrelativepaths.if(name&&name.charAt(0)==='.'){//Ifhaveabasename,trytonormalizeagainstit,//otherwise,assumeitisatop-levelrequirethatwill//berelativetobaseUrlintheend.if(baseName){//ConvertbaseNametoarray,andlopoffthelastpart,//sothat.matchesthat'directory'andnotnameofthebaseName's//module.Forinstance,baseNameof'one/two/three',mapsto//'one/two/three.js',butwewantthedirectory,'one/two'for//thisnormalization.normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=name.split('/');lastIndex=name.length-1;//IfwantingnodeIDcompatibility,strip.jsfromend//ofIDs.Havetodothishere,andnotinnameToUrl//becausenodeallowseither.jsornon.jstomap//tosamefile.if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,'');}name=normalizedBaseParts.concat(name);trimDots(name);name=name.join('/');}elseif(name.indexOf('./')===0){//NobaseName,sothisisIDisresolvedrelative//tobaseUrl,pullofftheleadingdot.name=name.substring(2);}}//Applymapconfigifavailable.if(applyMap&&map&&(baseParts||starMap)){nameParts=name.split('/');outerLoop:for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join('/');if(baseParts){//FindthelongestbaseNamesegmentmatchintheconfig.//So,dojoinsonthebiggesttosmallestlengthsofbaseParts.for(j=baseParts.length;j>0;j-=1){mapValue=getOwn(map,baseParts.slice(0,j).join('/'));//baseNamesegmenthasconfig,findifithasonefor//thisname.if(mapValue){mapValue=getOwn(mapValue,nameSegment);if(mapValue){//Match,updatenametothenewvalue.foundMap=mapValue;foundI=i;breakouterLoop;}}}}//Checkforastarmapmatch,butjustholdontoit,//ifthereisashortersegmentmatchlaterinamatching//config,thenfavoroverthisstarmap.if(!foundStarMap&&starMap&&getOwn(starMap,nameSegment)){foundStarMap=getOwn(starMap,nameSegment);starI=i;}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI;}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join('/');}}//Ifthenamepointstoapackage'sname,use//thepackagemaininstead.pkgMain=getOwn(config.pkgs,name);returnpkgMain?pkgMain:name;}functionremoveScript(name){if(isBrowser){each(scripts(),function(scriptNode){if(scriptNode.getAttribute('data-requiremodule')===name&&scriptNode.getAttribute('data-requirecontext')===context.contextName){scriptNode.parentNode.removeChild(scriptNode);returntrue;}});}}functionhasPathFallback(id){varpathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1){//Popoffthefirstarrayvalue,sinceitfailed,and//retrypathConfig.shift();context.require.undef(id);context.require([id]);returntrue;}}//Turnsaplugin!resourceto[plugin,resource]//withthepluginbeingundefinedifthename//didnothaveapluginprefix.functionsplitPrefix(name){varprefix,index=name?name.indexOf('!'):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length);}return[prefix,name];}/***Createsamodulemappingthatincludespluginprefix,module*name,andpath.IfparentModuleMapisprovideditwill*alsonormalizethenameviarequire.normalize()**@param{String}namethemodulename*@param{String}[parentModuleMap]parentmodulemap*forthemodulename,usedtoresolverelativenames.*@param{Boolean}isNormalized:istheIDalreadynormalized.*Thisistrueifthiscallisdoneforadefine()moduleID.*@param{Boolean}applyMap:applythemapconfigtotheID.*Shouldonlybetrueifthismapisforadependency.**@returns{Object}*/functionmakeModuleMap(name,parentModuleMap,isNormalized,applyMap){varurl,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=true,normalizedName='';//Ifnoname,thenitmeansitisarequirecall,generatean//internalname.if(!name){isDefine=false;name='_@r'+(requireCounter+=1);}nameParts=splitPrefix(name);prefix=nameParts[0];name=nameParts[1];if(prefix){prefix=normalize(prefix,parentName,applyMap);pluginModule=getOwn(defined,prefix);}//Accountforrelativepathsifthereisabasename.if(name){if(prefix){if(pluginModule&&pluginModule.normalize){//Pluginisloaded,useitsnormalizemethod.normalizedName=pluginModule.normalize(name,function(name){returnnormalize(name,parentName,applyMap);});}else{normalizedName=normalize(name,parentName,applyMap);}}else{//Aregularmodule.normalizedName=normalize(name,parentName,applyMap);//NormalizednamemaybeapluginIDduetomapconfig//applicationinnormalize.Themapconfigvaluesmust//alreadybenormalized,sodonotneedtoredothatpart.nameParts=splitPrefix(normalizedName);prefix=nameParts[0];normalizedName=nameParts[1];isNormalized=true;url=context.nameToUrl(normalizedName);}}//Iftheidisapluginidthatcannotbedeterminedifitneeds//normalization,stampitwithauniqueIDsotwomatchingrelative//idsthatmayconflictcanbeseparate.suffix=prefix&&!pluginModule&&!isNormalized?'_unnormalized'+(unnormalizedCounter+=1):'';return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+'!'+normalizedName:normalizedName)+suffix};}functiongetModule(depMap){varid=depMap.id,mod=getOwn(registry,id);if(!mod){mod=registry[id]=newcontext.Module(depMap);}returnmod;}functionon(depMap,name,fn){varid=depMap.id,mod=getOwn(registry,id);if(hasProp(defined,id)&&(!mod||mod.defineEmitComplete)){if(name==='defined'){fn(defined[id]);}}else{mod=getModule(depMap);if(mod.error&&name==='error'){fn(mod.error);}else{mod.on(name,fn);}}}functiononError(err,errback){varids=err.requireModules,notified=false;if(errback){errback(err);}else{each(ids,function(id){varmod=getOwn(registry,id);if(mod){//Seterroronmodule,soitskipstimeoutchecks.mod.error=err;if(mod.events.error){notified=true;mod.emit('error',err);}}});if(!notified){req.onError(err);}}}/***InternalmethodtotransferglobalQueueitemstothiscontext's*defQueue.*/functiontakeGlobalQueue(){//PushalltheglobalDefQueueitemsintothecontext'sdefQueueif(globalDefQueue.length){//Arrayspliceinthevaluessincethecontextcodehasa//localvarreftodefQueue,socannotjustreassigntheone//oncontext.apsp.apply(defQueue,[defQueue.length,0].concat(globalDefQueue));globalDefQueue=[];}}handlers={'require':function(mod){if(mod.require){returnmod.require;}else{return(mod.require=context.makeRequire(mod.map));}},'exports':function(mod){mod.usingExports=true;if(mod.map.isDefine){if(mod.exports){return(defined[mod.map.id]=mod.exports);}else{return(mod.exports=defined[mod.map.id]={});}}},'module':function(mod){if(mod.module){returnmod.module;}else{return(mod.module={id:mod.map.id,uri:mod.map.url,config:function(){returngetOwn(config.config,mod.map.id)||{};},exports:mod.exports||(mod.exports={})});}}};functioncleanRegistry(id){//Cleanupmachineryusedforwaitingmodules.deleteregistry[id];deleteenabledRegistry[id];}functionbreakCycle(mod,traced,processed){varid=mod.map.id;if(mod.error){mod.emit('error',mod.error);}else{traced[id]=true;each(mod.depMaps,function(depMap,i){vardepId=depMap.id,dep=getOwn(registry,depId);//Onlyforcethingsthathavenotcompleted//beingdefined,sostillintheregistry,//andonlyifithasnotbeenmatchedup//inthemodulealready.if(dep&&!mod.depMatched[i]&&!processed[depId]){if(getOwn(traced,depId)){mod.defineDep(i,defined[depId]);mod.check();//passfalse?}else{breakCycle(dep,traced,processed);}}});processed[id]=true;}}functioncheckLoaded(){varerr,usingPathFallback,waitInterval=config.waitSeconds*1000,//ItispossibletodisablethewaitintervalbyusingwaitSecondsof0.expired=waitInterval&&(context.startTime+waitInterval)<newDate().getTime(),noLoads=[],reqCalls=[],stillLoading=false,needCycleCheck=true;//Donotbotherifthiscallwasaresultofacyclebreak.if(inCheckLoaded){return;}inCheckLoaded=true;//Figureoutthestateofallthemodules.eachProp(enabledRegistry,function(mod){varmap=mod.map,modId=map.id;//Skipthingsthatarenotenabledorinerrorstate.if(!mod.enabled){return;}if(!map.isDefine){reqCalls.push(mod);}if(!mod.error){//Ifthemoduleshouldbeexecuted,andithasnot//beeninitedandtimeisup,rememberit.if(!mod.inited&&expired){if(hasPathFallback(modId)){usingPathFallback=true;stillLoading=true;}else{noLoads.push(modId);removeScript(modId);}}elseif(!mod.inited&&mod.fetched&&map.isDefine){stillLoading=true;if(!map.prefix){//Noreasontokeeplookingforunfinished//loading.IftheonlystillLoadingisa//pluginresourcethough,keepgoing,//becauseitmaybethatapluginresource//iswaitingonanon-plugincycle.return(needCycleCheck=false);}}}});if(expired&&noLoads.length){//Ifwaittimeexpired,throwerrorofunloadedmodules.err=makeError('timeout','Loadtimeoutformodules:'+noLoads,null,noLoads);err.contextName=context.contextName;returnonError(err);}//Notexpired,checkforacycle.if(needCycleCheck){each(reqCalls,function(mod){breakCycle(mod,{},{});});}//Ifstillwaitingonloads,andthewaitingloadissomething//otherthanapluginresource,ortherearestilloutstanding//scripts,thenjusttrybacklater.if((!expired||usingPathFallback)&&stillLoading){//Somethingisstillwaitingtoload.Waitforit,butonly//ifatimeoutisnotalreadyineffect.if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded();},50);}}inCheckLoaded=false;}Module=function(map){this.events=getOwn(undefEvents,map.id)||{};this.map=map;this.shim=getOwn(config.shim,map.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0;/*this.exportsthis.factorythis.depMaps=[],this.enabled,this.fetched*/};Module.prototype={init:function(depMaps,factory,errback,options){options=options||{};//Donotdomoreinitsifalreadydone.Canhappenifthere//aremultipledefinecallsforthesamemodule.Thatisnot//anormal,commoncase,butitisalsonotunexpected.if(this.inited){return;}this.factory=factory;if(errback){//Registerforerrorsonthismodule.this.on('error',errback);}elseif(this.events.error){//Ifnoerrbackalready,butthereareerrorlisteners//onthismodule,setupanerrbacktopasstothedeps.errback=bind(this,function(err){this.emit('error',err);});}//Doacopyofthedependencyarray,sothat//sourceinputsarenotmodified.Forexample//"shim"depsarepassedinheredirectly,and//doingadirectmodificationofthedepMapsarray//wouldaffectthatconfig.this.depMaps=depMaps&&depMaps.slice(0);this.errback=errback;//Indicatethismodulehasbeinitializedthis.inited=true;this.ignore=options.ignore;//Couldhaveoptiontoinitthismoduleinenabledmode,//orcouldhavebeenpreviouslymarkedasenabled.However,//thedependenciesarenotknownuntilinitiscalled.So//ifenabledpreviously,nowtriggerdependenciesasenabled.if(options.enabled||this.enabled){//Enablethismoduleanddependencies.//Willcallthis.check()this.enable();}else{this.check();}},defineDep:function(i,depExports){//Becauseofcycles,definedcallbackforagiven//exportcanbecalledmorethanonce.if(!this.depMatched[i]){this.depMatched[i]=true;this.depCount-=1;this.depExports[i]=depExports;}},fetch:function(){if(this.fetched){return;}this.fetched=true;context.startTime=(newDate()).getTime();varmap=this.map;//Ifthemanagerisforapluginmanagedresource,//asktheplugintoloaditnow.if(this.shim){context.makeRequire(this.map,{enableBuildCallback:true})(this.shim.deps||[],bind(this,function(){returnmap.prefix?this.callPlugin():this.load();}));}else{//Regulardependency.returnmap.prefix?this.callPlugin():this.load();}},load:function(){varurl=this.map.url;//Regulardependency.if(!urlFetched[url]){urlFetched[url]=true;context.load(this.map.id,url);}},/***Checksifthemoduleisreadytodefineitself,andifso,*defineit.*/check:function(){if(!this.enabled||this.enabling){return;}varerr,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(!this.inited){this.fetch();}elseif(this.error){this.emit('error',this.error);}elseif(!this.defining){//Thefactorycouldtriggeranotherrequirecall//thatwouldresultincheckingthismoduleto//defineitselfagain.Ifalreadyintheprocess//ofdoingthat,skipthiswork.this.defining=true;if(this.depCount<1&&!this.defined){if(isFunction(factory)){//Ifthereisanerrorlistener,favorpassing//tothatinsteadofthrowinganerror.However,//onlydoitfordefine()'dmodules.require//errbacksshouldnotbecalledforfailuresin//theircallbacks(#699).Howeverifaglobal//onErrorisset,usethat.if((this.events.error&&this.map.isDefine)||req.onError!==defaultOnError){try{exports=context.execCb(id,factory,depExports,exports);}catch(e){err=e;}}else{exports=context.execCb(id,factory,depExports,exports);}//Favorreturnvalueoverexports.Ifnode/cjsinplay,//thenwillnothaveareturnvalueanyway.Favor//module.exportsassignmentoverexportsobject.if(this.map.isDefine&&exports===undefined){cjsModule=this.module;if(cjsModule){exports=cjsModule.exports;}elseif(this.usingExports){//exportsalreadysetthedefinedvalue.exports=this.exports;}}if(err){err.requireMap=this.map;err.requireModules=this.map.isDefine?[this.map.id]:null;err.requireType=this.map.isDefine?'define':'require';returnonError((this.error=err));}}else{//Justaliteralvalueexports=factory;}this.exports=exports;if(this.map.isDefine&&!this.ignore){defined[id]=exports;if(req.onResourceLoad){req.onResourceLoad(context,this.map,this.depMaps);}}//CleanupcleanRegistry(id);this.defined=true;}//Finishedthedefinestage.Allowcallingcheckagain//toallowdefinenotificationsbelowinthecaseofa//cycle.this.defining=false;if(this.defined&&!this.defineEmitted){this.defineEmitted=true;this.emit('defined',this.exports);this.defineEmitComplete=true;}}},callPlugin:function(){varmap=this.map,id=map.id,//Mapalreadynormalizedtheprefix.pluginMap=makeModuleMap(map.prefix);//Markthisasadependencyforthisplugin,soit//canbetracedforcycles.this.depMaps.push(pluginMap);on(pluginMap,'defined',bind(this,function(plugin){varload,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:true});//Ifcurrentmapisnotnormalized,waitforthat//normalizednametoloadinsteadofcontinuing.if(this.map.unnormalized){//NormalizetheIDifthepluginallowsit.if(plugin.normalize){name=plugin.normalize(name,function(name){returnnormalize(name,parentName,true);})||'';}//prefixandnameshouldalreadybenormalized,noneed//forapplyingmapconfigagaineither.normalizedMap=makeModuleMap(map.prefix+'!'+name,this.map.parentMap);on(normalizedMap,'defined',bind(this,function(value){this.init([],function(){returnvalue;},null,{enabled:true,ignore:true});}));normalizedMod=getOwn(registry,normalizedMap.id);if(normalizedMod){//Markthisasadependencyforthisplugin,soit//canbetracedforcycles.this.depMaps.push(normalizedMap);if(this.events.error){normalizedMod.on('error',bind(this,function(err){this.emit('error',err);}));}normalizedMod.enable();}return;}//Ifapathsconfig,thenjustloadthatfileinsteadto//resolvetheplugin,asitisbuiltintothatpathslayer.if(bundleId){this.map.url=context.nameToUrl(bundleId);this.load();return;}load=bind(this,function(value){this.init([],function(){returnvalue;},null,{enabled:true});});load.error=bind(this,function(err){this.inited=true;this.error=err;err.requireModules=[id];//Removetempunnormalizedmodulesforthismodule,//sincetheywillneverberesolvedotherwisenow.eachProp(registry,function(mod){if(mod.map.id.indexOf(id+'_unnormalized')===0){cleanRegistry(mod.map.id);}});onError(err);});//Allowpluginstoloadothercodewithouthavingtoknowthe//contextorhowto'complete'theload.load.fromText=bind(this,function(text,textAlt){/*jslintevil:true*/varmoduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;//Asof2.1.0,supportjustpassingthetext,toreinforce//fromTextonlybeingcalledonceperresource.Still//supportoldstyleofpassingmoduleNamebutdiscard//thatmoduleNameinfavoroftheinternalref.if(textAlt){text=textAlt;}//TurnoffinteractivescriptmatchingforIEforanydefine//callsinthetext,thenturnitbackonattheend.if(hasInteractive){useInteractive=false;}//Primethesystembycreatingamoduleinstancefor//it.getModule(moduleMap);//Transferanyconfigtothisothermodule.if(hasProp(config.config,id)){config.config[moduleName]=config.config[id];}try{req.exec(text);}catch(e){returnonError(makeError('fromtexteval','fromTextevalfor'+id+'failed:'+e,e,[id]));}if(hasInteractive){useInteractive=true;}//Markthisasadependencyfortheplugin//resourcethis.depMaps.push(moduleMap);//Supportanonymousmodules.context.completeLoad(moduleName);//Bindthevalueofthatmoduletothevalueforthis//resourceID.localRequire([moduleName],load);});//UseparentNameheresincetheplugin'snameisnotreliable,//couldbesomeweirdstringwithnopaththatactuallywantsto//referencetheparentName'spath.plugin.load(map.name,localRequire,load,config);}));context.enable(pluginMap,this);this.pluginMaps[pluginMap.id]=pluginMap;},enable:function(){enabledRegistry[this.map.id]=this;this.enabled=true;//Setflagmentioningthatthemoduleisenabling,//sothatimmediatecallstothedefinedcallbacks//fordependenciesdonottriggerinadvertentload//withthedepCountstillbeingzero.this.enabling=true;//Enableeachdependencyeach(this.depMaps,bind(this,function(depMap,i){varid,mod,handler;if(typeofdepMap==='string'){//DependencyneedstobeconvertedtoadepMap//andwireduptothismodule.depMap=makeModuleMap(depMap,(this.map.isDefine?this.map:this.map.parentMap),false,!this.skipMap);this.depMaps[i]=depMap;handler=getOwn(handlers,depMap.id);if(handler){this.depExports[i]=handler(this);return;}this.depCount+=1;on(depMap,'defined',bind(this,function(depExports){this.defineDep(i,depExports);this.check();}));if(this.errback){on(depMap,'error',bind(this,this.errback));}}id=depMap.id;mod=registry[id];//Skipspecialmoduleslike'require','exports','module'//Also,don'tcallenableifitisalreadyenabled,//importantincirculardependencycases.if(!hasProp(handlers,id)&&mod&&!mod.enabled){context.enable(depMap,this);}}));//Enableeachpluginthatisusedin//adependencyeachProp(this.pluginMaps,bind(this,function(pluginMap){varmod=getOwn(registry,pluginMap.id);if(mod&&!mod.enabled){context.enable(pluginMap,this);}}));this.enabling=false;this.check();},on:function(name,cb){varcbs=this.events[name];if(!cbs){cbs=this.events[name]=[];}cbs.push(cb);},emit:function(name,evt){each(this.events[name],function(cb){cb(evt);});if(name==='error'){//Nowthattheerrorhandlerwastriggered,remove//thelisteners,sincethisbrokenModuleinstance//canstayaroundforawhileintheregistry.deletethis.events[name];}}};functioncallGetModule(args){//Skipmodulesalreadydefined.if(!hasProp(defined,args[0])){getModule(makeModuleMap(args[0],null,true)).init(args[1],args[2]);}}functionremoveListener(node,func,name,ieName){//FavordetachEventbecauseofIE9//issue,seeattachEvent/addEventListenercommentelsewhere//inthisfile.if(node.detachEvent&&!isOpera){//ProbablyIE.Ifnotitwillthrowanerror,whichwillbe//usefultoknow.if(ieName){node.detachEvent(ieName,func);}}else{node.removeEventListener(name,func,false);}}/***Givenaneventfromascriptnode,gettherequirejsinfofromit,*andthenremovestheeventlistenersonthenode.*@param{Event}evt*@returns{Object}*/functiongetScriptData(evt){//UsingcurrentTargetinsteadoftargetforFirefox2.0'ssake.Not//alloldbrowserswillbesupported,butthisonewaseasyenough//tosupportandstillmakessense.varnode=evt.currentTarget||evt.srcElement;//Removethelistenersoncehere.removeListener(node,context.onScriptLoad,'load','onreadystatechange');removeListener(node,context.onScriptError,'error');return{node:node,id:node&&node.getAttribute('data-requiremodule')};}functionintakeDefines(){varargs;//Anydefinedmodulesintheglobalqueue,intakethemnow.takeGlobalQueue();//MakesureanyremainingdefQueueitemsgetproperlyprocessed.while(defQueue.length){args=defQueue.shift();if(args[0]===null){returnonError(makeError('mismatch','Mismatchedanonymousdefine()module:'+args[args.length-1]));}else{//argsareid,deps,factory.Shouldbenormalizedbythe//define()function.callGetModule(args);}}}context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,/***Setaconfigurationforthecontext.*@param{Object}cfgconfigobjecttointegrate.*/configure:function(cfg){//MakesurethebaseUrlendsinaslash.if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=='/'){cfg.baseUrl+='/';}}//Saveoffthepathssincetheyrequirespecialprocessing,//theyareadditive.varshim=config.shim,objs={paths:true,bundles:true,config:true,map:true};eachProp(cfg,function(value,prop){if(objs[prop]){if(!config[prop]){config[prop]={};}mixin(config[prop],value,true,true);}else{config[prop]=value;}});//Reversemapthebundlesif(cfg.bundles){eachProp(cfg.bundles,function(value,prop){each(value,function(v){if(v!==prop){bundlesMap[v]=prop;}});});}//Mergeshimif(cfg.shim){eachProp(cfg.shim,function(value,id){//Normalizethestructureif(isArray(value)){value={deps:value};}if((value.exports||value.init)&&!value.exportsFn){value.exportsFn=context.makeShimExports(value);}shim[id]=value;});config.shim=shim;}//Adjustpackagesifnecessary.if(cfg.packages){each(cfg.packages,function(pkgObj){varlocation,name;pkgObj=typeofpkgObj==='string'?{name:pkgObj}:pkgObj;name=pkgObj.name;location=pkgObj.location;if(location){config.paths[name]=pkgObj.location;}//SavepointertomainmoduleIDforpkgname.//Removeleadingdotinmain,somainpathsarenormalized,//andremoveanytrailing.js,sincedifferentpackage//envshavedifferentconventions:someuseamodulename,//someuseafilename.config.pkgs[name]=pkgObj.name+'/'+(pkgObj.main||'main').replace(currDirRegExp,'').replace(jsSuffixRegExp,'');});}//Ifthereareany"waitingtoexecute"modulesintheregistry,//updatethemapsforthem,sincetheirinfo,likeURLstoload,//mayhavechanged.eachProp(registry,function(mod,id){//Ifmodulealreadyhasinitcalled,sinceitistoo//latetomodifythem,andignoreunnormalizedones//sincetheyaretransient.if(!mod.inited&&!mod.map.unnormalized){mod.map=makeModuleMap(id);}});//Ifadepsarrayoraconfigcallbackisspecified,thencall//requirewiththoseargs.Thisisusefulwhenrequireisdefinedasa//configobjectbeforerequire.jsisloaded.if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback);}},makeShimExports:function(value){functionfn(){varret;if(value.init){ret=value.init.apply(global,arguments);}returnret||(value.exports&&getGlobal(value.exports));}returnfn;},makeRequire:function(relMap,options){options=options||{};functionlocalRequire(deps,callback,errback){varid,map,requireMod;if(options.enableBuildCallback&&callback&&isFunction(callback)){callback.__requireJsBuild=true;}if(typeofdeps==='string'){if(isFunction(callback)){//InvalidcallreturnonError(makeError('requireargs','Invalidrequirecall'),errback);}//Ifrequire|exports|modulearerequested,getthe//valueforthemfromthespecialhandlers.Caveat://thisonlyworkswhilemoduleisbeingdefined.if(relMap&&hasProp(handlers,deps)){returnhandlers[deps](registry[relMap.id]);}//Synchronousaccesstoonemodule.Ifrequire.getis//available(asintheNodeadapter),preferthat.if(req.get){returnreq.get(context,deps,relMap,localRequire);}//Normalizemodulename,ifitcontains.or..map=makeModuleMap(deps,relMap,false,true);id=map.id;if(!hasProp(defined,id)){returnonError(makeError('notloaded','Modulename"'+id+'"hasnotbeenloadedyetforcontext:'+contextName+(relMap?'':'.Userequire([])')));}returndefined[id];}//Grabdefineswaitingintheglobalqueue.intakeDefines();//Markallthedependenciesasneedingtobeloaded.context.nextTick(function(){//Somedefinescouldhavebeenaddedsincethe//requirecall,collectthem.intakeDefines();requireMod=getModule(makeModuleMap(null,relMap));//Storeifmapconfigshouldbeappliedtothisrequire//callfordependencies.requireMod.skipMap=options.skipMap;requireMod.init(deps,callback,errback,{enabled:true});checkLoaded();});returnlocalRequire;}mixin(localRequire,{isBrowser:isBrowser,/***Convertsamodulename+.extensionintoanURLpath.**Requires*theuseofamodulename.Itdoesnotsupportusing*plainURLslikenameToUrl.*/toUrl:function(moduleNamePlusExt){varext,index=moduleNamePlusExt.lastIndexOf('.'),segment=moduleNamePlusExt.split('/')[0],isRelative=segment==='.'||segment==='..';//Haveafileextensionalias,anditisnotthe//dotsfromarelativepath.if(index!==-1&&(!isRelative||index>1)){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index);}returncontext.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,true),ext,true);},defined:function(id){returnhasProp(defined,makeModuleMap(id,relMap,false,true).id);},specified:function(id){id=makeModuleMap(id,relMap,false,true).id;returnhasProp(defined,id)||hasProp(registry,id);}});//Onlyallowundefontoplevelrequirecallsif(!relMap){localRequire.undef=function(id){//Bindanywaitingdefine()callstothiscontext,//fixfor#408takeGlobalQueue();varmap=makeModuleMap(id,relMap,true),mod=getOwn(registry,id);removeScript(id);deletedefined[id];deleteurlFetched[map.url];deleteundefEvents[id];//Cleanqueueddefinestoo.Gobackwards//inarraysothatthesplicesdonot//messuptheiteration.eachReverse(defQueue,function(args,i){if(args[0]===id){defQueue.splice(i,1);}});if(mod){//Holdontolistenersincasethe//modulewillbeattemptedtobereloaded//usingadifferentconfig.if(mod.events.defined){undefEvents[id]=mod.events;}cleanRegistry(id);}};}returnlocalRequire;},/***Calledtoenableamoduleifitisstillintheregistry*awaitingenablement.Asecondarg,parent,theparentmodule,*ispassedinforcontext,whenthismethodisoverriddenby*theoptimizer.Notshownheretokeepcodecompact.*/enable:function(depMap){varmod=getOwn(registry,depMap.id);if(mod){getModule(depMap).enable();}},/***Internalmethodusedbyenvironmentadapterstocompletealoadevent.*Aloadeventcouldbeascriptloadorjustaloadpassfromasynchronous*loadcall.*@param{String}moduleNamethenameofthemoduletopotentiallycomplete.*/completeLoad:function(moduleName){varfound,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;//Ifalreadyfoundananonymousmoduleandboundit//tothisname,thenthisissomeotheranonmodule//waitingforitscompleteLoadtofire.if(found){break;}found=true;}elseif(args[0]===moduleName){//Foundmatchingdefinecallforthisscript!found=true;}callGetModule(args);}//DothisafterthecycleofcallGetModuleincasetheresult//ofthosecalls/initcallschangestheregistry.mod=getOwn(registry,moduleName);if(!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(config.enforceDefine&&(!shExports||!getGlobal(shExports))){if(hasPathFallback(moduleName)){return;}else{returnonError(makeError('nodefine','Nodefinecallfor'+moduleName,null,[moduleName]));}}else{//Ascriptthatdoesnotcalldefine(),sojustsimulate//thecallforit.callGetModule([moduleName,(shim.deps||[]),shim.exportsFn]);}}checkLoaded();},/***Convertsamodulenametoafilepath.Supportscaseswhere*moduleNamemayactuallybejustanURL.*Notethatit**doesnot**callnormalizeonthemoduleName,*itisassumedtohavealreadybeennormalized.Thisisan*internalAPI,notapublicone.UsetoUrlforthepublicAPI.*/nameToUrl:function(moduleName,ext,skipExt){varpaths,syms,i,parentModule,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain){moduleName=pkgMain;}bundleId=getOwn(bundlesMap,moduleName);if(bundleId){returncontext.nameToUrl(bundleId,ext,skipExt);}//IfacolonisintheURL,itindicatesaprotocolisusedanditisjust//anURLtoafile,orifitstartswithaslash,containsaqueryarg(i.e.?)//orendswith.js,thenassumetheusermeanttouseanurlandnotamoduleid.//Theslashisimportantforprotocol-lessURLsaswellasfullpaths.if(req.jsExtRegExp.test(moduleName)){//Justaplainpath,notmodulenamelookup,sojustreturnit.//Addextensionifitisincluded.Thisisabitwonky,onlynon-.jsthingspass//anextension,thismethodprobablyneedstobereworked.url=moduleName+(ext||'');}else{//Amodulethatneedstobeconvertedtoapath.paths=config.paths;syms=moduleName.split('/');//Foreachmodulenamesegment,seeifthereisapath//registeredforit.Startwithmostspecificname//andworkupfromit.for(i=syms.length;i>0;i-=1){parentModule=syms.slice(0,i).join('/');parentPath=getOwn(paths,parentModule);if(parentPath){//Ifanarray,itmeansthereareafewchoices,//Choosetheonethatisdesiredif(isArray(parentPath)){parentPath=parentPath[0];}syms.splice(0,i,parentPath);break;}}//Jointhepathpartstogether,thenfigureoutifbaseUrlisneeded.url=syms.join('/');url+=(ext||(/^data\:|\?/.test(url)||skipExt?'':'.js'));url=(url.charAt(0)==='/'||url.match(/^[\w\+\.\-]+:/)?'':config.baseUrl)+url;}returnconfig.urlArgs?url+((url.indexOf('?')===-1?'?':'&')+config.urlArgs):url;},//Delegatestoreq.load.Brokenoutasaseparatefunctionto//allowoverridingintheoptimizer.load:function(id,url){req.load(context,id,url);},/***Executesamodulecallbackfunction.Brokenoutasaseparatefunction*solelytoallowthebuildsystemtosequencethefilesinthebuilt*layerintherightsequence.**@private*/execCb:function(name,callback,args,exports){returncallback.apply(exports,args);},/***callbackforscriptloads,usedtocheckstatusofloading.**@param{Event}evttheeventfromthebrowserforthescript*thatwasloaded.*/onScriptLoad:function(evt){//UsingcurrentTargetinsteadoftargetforFirefox2.0'ssake.Not//alloldbrowserswillbesupported,butthisonewaseasyenough//tosupportandstillmakessense.if(evt.type==='load'||(readyRegExp.test((evt.currentTarget||evt.srcElement).readyState))){//Resetinteractivescriptsoascriptnodeisnotheldontofor//tolong.interactiveScript=null;//Pulloutthenameofthemoduleandthecontext.vardata=getScriptData(evt);context.completeLoad(data.id);}},/***Callbackforscripterrors.*/onScriptError:function(evt){vardata=getScriptData(evt);if(!hasPathFallback(data.id)){returnonError(makeError('scripterror','Scripterrorfor:'+data.id,evt,[data.id]));}}};context.require=context.makeRequire();returncontext;}/***Mainentrypoint.**Iftheonlyargumenttorequireisastring,thenthemodulethat*isrepresentedbythatstringisfetchedfortheappropriatecontext.**Ifthefirstargumentisanarray,thenitwillbetreatedasanarray*ofdependencystringnamestofetch.Anoptionalfunctioncallbackcan*bespecifiedtoexecutewhenallofthosedependenciesareavailable.**MakealocalreqvariabletohelpCajacompliance(itassumesthings*onarequirethatarenotstandardized),andtogiveashort*nameforminification/localscopeuse.*/req=requirejs=function(deps,callback,errback,optional){//Findtherightcontext,usedefaultvarcontext,config,contextName=defContextName;//Determineifhaveconfigobjectinthecall.if(!isArray(deps)&&typeofdeps!=='string'){//depsisaconfigobjectconfig=deps;if(isArray(callback)){//Adjustargsiftherearedependenciesdeps=callback;callback=errback;errback=optional;}else{deps=[];}}if(config&&config.context){contextName=config.context;}context=getOwn(contexts,contextName);if(!context){context=contexts[contextName]=req.s.newContext(contextName);}if(config){context.configure(config);}returncontext.require(deps,callback,errback);};/***Supportrequire.config()tomakeiteasiertocooperatewithother*AMDloadersongloballyagreednames.*/req.config=function(config){returnreq(config);};/***Executesomethingafterthecurrenttick*oftheeventloop.Overrideforotherenvs*thathaveabettersolutionthansetTimeout.*@param{Function}fnfunctiontoexecutelater.*/req.nextTick=typeofsetTimeout!=='undefined'?function(fn){setTimeout(fn,4);}:function(fn){fn();};/***Exportrequireasaglobal,butonlyifitdoesnotalreadyexist.*/if(!require){require=req;}req.version=version;//Usedtofilteroutdependenciesthatarealreadypaths.req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};//Createdefaultcontext.req({});//Exportssomecontext-sensitivemethodsonglobalrequire.each(['toUrl','undef','defined','specified'],function(prop){//Referencefromcontextsinsteadofearlybindingtodefaultcontext,//sothatduringbuilds,thelatestinstanceofthedefaultcontext//withitsconfiggetsused.req[prop]=function(){varctx=contexts[defContextName];returnctx.require[prop].apply(ctx,arguments);};});if(isBrowser){head=s.head=document.getElementsByTagName('head')[0];//IfBASEtagisinplay,usingappendChildisaproblemforIE6.//Whenthatbrowserdies,thiscanberemoved.DetailsinthisjQuerybug://http://dev.jquery.com/ticket/2709baseElement=document.getElementsByTagName('base')[0];if(baseElement){head=s.head=baseElement.parentNode;}}/***Anyerrorsthatrequireexplicitlygenerateswillbepassedtothis*function.Intercept/overrideitifyouwantcustomerrorhandling.*@param{Error}errtheerrorobject.*/req.onError=defaultOnError;/***Createsthenodefortheloadcommand.Onlyusedinbrowserenvs.*/req.createNode=function(config,moduleName,url){varnode=config.xhtml?document.createElementNS('http://www.w3.org/1999/xhtml','html:script'):document.createElement('script');node.type=config.scriptType||'text/javascript';node.charset='utf-8';node.async=true;returnnode;};/***Doestherequesttoloadamoduleforthebrowsercase.*Makethisaseparatefunctiontoallowotherenvironments*tooverrideit.**@param{Object}contexttherequirecontexttofindstate.*@param{String}moduleNamethenameofthemodule.*@param{Object}urltheURLtothemodule.*/req.load=function(context,moduleName,url){varconfig=(context&&context.config)||{},node;if(isBrowser){//Inthebrowsersouseascripttagnode=req.createNode(config,moduleName,url);node.setAttribute('data-requirecontext',context.contextName);node.setAttribute('data-requiremodule',moduleName);//Setuploadlistener.TestattachEventfirstbecauseIE9has//asubtleissueinitsaddEventListenerandscriptonloadfirings//thatdonotmatchthebehaviorofallotherbrowserswith//addEventListenersupport,whichfiretheonloadeventfora//scriptrightafterthescriptexecution.See://https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution//UNFORTUNATELYOperaimplementsattachEventbutdoesnotfollowthescript//scriptexecutionmode.if(node.attachEvent&&//Checkifnode.attachEventisartificiallyaddedbycustomscriptor//nativelysupportedbybrowser//readhttps://github.com/jrburke/requirejs/issues/187//ifwecanNOTfind[nativecode]thenitmustNOTnativelysupported.//inIE8,node.attachEventdoesnothavetoString()//Notethetestfor"[nativecode"withnoclosingbrace,see://https://github.com/jrburke/requirejs/issues/273!(node.attachEvent.toString&&node.attachEvent.toString().indexOf('[nativecode')<0)&&!isOpera){//ProbablyIE.IE(atleast6-8)donotfire//scriptonloadrightafterexecutingthescript,so//wecannottietheanonymousdefinecalltoaname.//However,IEreportsthescriptasbeingin'interactive'//readyStateatthetimeofthedefinecall.useInteractive=true;node.attachEvent('onreadystatechange',context.onScriptLoad);//Itwouldbegreattoaddanerrorhandlerheretocatch//404sinIE9+.However,onreadystatechangewillfirebefore//theerrorhandler,sothatdoesnothelp.IfaddEventListener//isused,thenIEwillfireerrorbeforeload,butwecannot//usethatpathwaygiventheconnect.microsoft.comissue//mentionedaboveaboutnotdoingthe'scriptexecute,//thenfirethescriptloadeventlistenerbeforeexecute//nextscript'thatotherbrowsersdo.//Besthope:IE10fixestheissues,//andthendestroysallinstallsofIE6-9.//node.attachEvent('onerror',context.onScriptError);}else{node.addEventListener('load',context.onScriptLoad,false);node.addEventListener('error',context.onScriptError,false);}node.src=url;//ForsomecachecasesinIE6-8,thescriptexecutesbeforetheend//oftheappendChildexecution,sototieananonymousdefine//calltothemodulename(whichisstoredonthenode),holdon//toareferencetothisnode,butclearaftertheDOMinsertion.currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement);}else{head.appendChild(node);}currentlyAddingScript=null;returnnode;}elseif(isWebWorker){try{//Inawebworker,useimportScripts.Thisisnotavery//efficientuseofimportScripts,importScriptswillblockuntil//itsscriptisdownloadedandevaluated.However,ifwebworkers//areinplay,theexpectationthatabuildhasbeendonesothat//onlyonescriptneedstobeloadedanyway.Thismayneedtobe//reevaluatedifotherusecasesbecomecommon.importScripts(url);//Accountforanonymousmodulescontext.completeLoad(moduleName);}catch(e){context.onError(makeError('importscripts','importScriptsfailedfor'+moduleName+'at'+url,e,[moduleName]));}}};functiongetInteractiveScript(){if(interactiveScript&&interactiveScript.readyState==='interactive'){returninteractiveScript;}eachReverse(scripts(),function(script){if(script.readyState==='interactive'){return(interactiveScript=script);}});returninteractiveScript;}//Lookforadata-mainscriptattribute,whichcouldalsoadjustthebaseUrl.if(isBrowser&&!cfg.skipDataMain){//FigureoutbaseUrl.Getitfromthescripttagwithrequire.jsinit.eachReverse(scripts(),function(script){//Setthe'head'wherewecanappendchildrenby//usingthescript'sparent.if(!head){head=script.parentNode;}//Lookforadata-mainattributetosetmainscriptforthepage//toload.Ifitisthere,thepathtodatamainbecomesthe//baseUrl,ifitisnotalreadyset.dataMain=script.getAttribute('data-main');if(dataMain){//PreservedataMainincaseitisapath(i.e.contains'?')mainScript=dataMain;//SetfinalbaseUrlifthereisnotalreadyanexplicitone.if(!cfg.baseUrl){//Pulloffthedirectoryofdata-mainforuseasthe//baseUrl.src=mainScript.split('/');mainScript=src.pop();subPath=src.length?src.join('/')+'/':'./';cfg.baseUrl=subPath;}//Stripoffanytrailing.jssincemainScriptisnow//likeamodulename.mainScript=mainScript.replace(jsSuffixRegExp,'');//IfmainScriptisstillapath,fallbacktodataMainif(req.jsExtRegExp.test(mainScript)){mainScript=dataMain;}//Putthedata-mainscriptinthefilestoload.cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript];returntrue;}});}/***Thefunctionthathandlesdefinitionsofmodules.Differsfrom*require()inthatastringforthemoduleshouldbethefirstargument,*andthefunctiontoexecuteafterdependenciesareloadedshould*returnavaluetodefinethemodulecorrespondingtothefirstargument's*name.*/define=function(name,deps,callback){varnode,context;//Allowforanonymousmodulesif(typeofname!=='string'){//Adjustargsappropriatelycallback=deps;deps=name;name=null;}//Thismodulemaynothavedependenciesif(!isArray(deps)){callback=deps;deps=null;}//Ifnoname,andcallbackisafunction,thenfigureoutifita//CommonJSthingwithdependencies.if(!deps&&isFunction(callback)){deps=[];//Removecommentsfromthecallbackstring,//lookforrequirecalls,andpullthemintothedependencies,//butonlyiftherearefunctionargs.if(callback.length){callback.toString().replace(commentRegExp,'').replace(cjsRequireRegExp,function(match,dep){deps.push(dep);});//MaybeaCommonJSthingevenwithoutrequirecalls,butstill//coulduseexports,andmodule.Avoiddoingexportsandmodule//workthoughifitjustneedsrequire.//REQUIRESthefunctiontoexpecttheCommonJSvariablesinthe//orderlistedbelow.deps=(callback.length===1?['require']:['require','exports','module']).concat(deps);}}//IfinIE6-8andhitananonymousdefine()call,dotheinteractive//work.if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute('data-requiremodule');}context=contexts[node.getAttribute('data-requirecontext')];}}//Alwayssaveoffevaluatingthedefcalluntilthescriptonloadhandler.//Thisallowsmultiplemodulestobeinafilewithoutprematurely//tracingdependencies,andallowsforanonymousmodulesupport,//wherethemodulenameisnotknownuntilthescriptonloadevent//occurs.Ifnocontext,usetheglobalqueue,andgetitprocessed//intheonscriptloadcallback.(context?context.defQueue:globalDefQueue).push([name,deps,callback]);};define.amd={jQuery:true};/***Executesthetext.Normallyjustuseseval,butcanbemodified*touseabetter,environment-specificcall.Onlyusedfortranspiling*loaderplugins,notforplainJSmodules.*@param{String}textthetexttoexecute/evaluate.*/req.exec=function(text){/*jslintevil:true*/returneval(text);};//Setupwithconfiginfo.req(cfg);}(this));